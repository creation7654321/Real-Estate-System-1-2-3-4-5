"use strict";var EasyWPSMTPDebugEvents=window.EasyWPSMTPDebugEvents||function(n){var s={$debugEventsPage:n(".easy-wp-smtp-tab-tools-debug-events"),$dateFlatpickr:n(".easy-wp-smtp-filter-date-selector")},a={init:function(){n(a.ready)},ready:function(){a.initDateRange(),a.events();var e=new URLSearchParams(location.search);e.has("debug_event_id")&&a.openDebugEventPopup(e.get("debug_event_id"))},events:function(){s.$debugEventsPage.on("click","#easy-wp-smtp-reset-filter .reset",a.resetFilter),s.$debugEventsPage.on("click","#easy-wp-smtp-delete-all-debug-events-button",a.deleteAllDebugEvents),s.$debugEventsPage.on("click",".js-easy-wp-smtp-debug-event-preview",a.eventClicked)},initDateRange:function(){var e=easy_wp_smtp_tools_debug_events.lang_code,t={rangeSeparator:" - "};"undefined"!==flatpickr&&Object.prototype.hasOwnProperty.call(flatpickr,"l10ns")&&Object.prototype.hasOwnProperty.call(flatpickr.l10ns,e)&&((t=flatpickr.l10ns[e]).rangeSeparator=" - "),s.$dateFlatpickr.flatpickr({altInput:!0,altFormat:"M j, Y",dateFormat:"Y-m-d",locale:t,mode:"range"})},resetFilter:function(){var e=n(this).parents("form");e.find(n(this).data("scope")).find("input,select").each(function(){var e=n(this);a.isIgnoredForResetInput(e)||a.resetInput(e)}),e.submit()},resetInput:function(e){switch(e.prop("tagName").toLowerCase()){case"input":e.val("");break;case"select":e.val(e.find("option").first().val())}},isIgnoredForResetInput:function(e){return-1!==["submit","hidden"].indexOf((e.attr("type")||"").toLowerCase())&&!e.hasClass("flatpickr-input")},deleteAllDebugEvents:function(e){e.preventDefault();var t=n(e.target);n.confirm({backgroundDismiss:!1,escapeKey:!0,animationBounce:1,closeIcon:!0,type:"orange",icon:EasyWPSMTP.Admin.Settings.getModalIcon("exclamation-triangle-orange"),title:easy_wp_smtp_tools_debug_events.texts.notice_title,content:easy_wp_smtp_tools_debug_events.texts.delete_all_notice,buttons:{confirm:{text:easy_wp_smtp_tools_debug_events.texts.yes,btnClass:"btn-confirm",keys:["enter"],action:function(){a.executeAllDebugEventsDeletion(t)}},cancel:{text:easy_wp_smtp_tools_debug_events.texts.cancel,btnClass:"btn-cancel"}}})},eventClicked:function(e){e.preventDefault(),a.openDebugEventPopup(n(this).data("event-id"))},openDebugEventPopup:function(e){var e={action:"easy_wp_smtp_debug_event_preview",id:e,nonce:n("#easy-wp-smtp-debug-events-nonce",s.$debugEventsPage).val()},t=n.alert({backgroundDismiss:!0,escapeKey:!0,animationBounce:1,type:"blue",icon:"",title:!1,content:easy_wp_smtp_tools_debug_events.loader,boxWidth:"550px",buttons:{confirm:{text:easy_wp_smtp_tools_debug_events.texts.close,btnClass:"btn-confirm",keys:["enter"]}},onOpenBefore:function(){this.$contentPane.addClass("no-scroll")}});n.post(ajaxurl,e,function(e){e.success?(t.setTitle(e.data.title),t.setContent(e.data.content)):t.setContent(e.data)}).fail(function(){t.setContent(easy_wp_smtp_tools_debug_events.texts.error_occurred)})},executeAllDebugEventsDeletion:function(o){o.prop("disabled",!0);var e={action:"easy_wp_smtp_delete_all_debug_events",nonce:n("#easy-wp-smtp-debug-events-nonce",s.$debugEventsPage).val()};n.post(ajaxurl,e,function(e){var t,n,s,a=e.data;e.success?(t="check-circle-green",n="green",s=function(){return location.reload(),!1}):(t="times-circle-red",n="red"),EasyWPSMTP.Admin.Settings.displayAlertModal(a,t,n,s),o.prop("disabled",!1)}).fail(function(){EasyWPSMTP.Admin.Settings.displayAlertModal(easy_wp_smtp_tools_debug_events.texts.error_occurred,"times-circle-red","red"),o.prop("disabled",!1)})}};return a}((document,window,jQuery));EasyWPSMTPDebugEvents.init();